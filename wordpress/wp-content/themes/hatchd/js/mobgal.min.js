(function(){var b=$('<div id="galleryOverlay">'),d=$('<div id="gallerySlider">'),f=$('<a id="prevArrow"></a>'),c=$('<a id="nextArrow"></a>'),e=0,a=false;$.fn.touchTouch=function(){var o=$([]),m=0,n=this;b.hide().appendTo("body");d.appendTo(b);n.each(function(){o=o.add($('<div class="placeholder">'))});d.append(o).on("click",function(r){if(!$(r.target).is("img")){h()}});$("body").on("touchstart","#gallerySlider img",function(s){var t=s.originalEvent,r=t.changedTouches[0].pageX;d.on("touchmove",function(u){u.preventDefault();t=u.originalEvent.touches[0]||u.originalEvent.changedTouches[0];if(t.pageX-r>10){d.off("touchmove");g()}else{if(t.pageX-r<-10){d.off("touchmove");j()}}});return false}).on("touchend",function(){d.off("touchmove")});n.on("click",function(r){r.preventDefault();m=n.index(this);k(m);q(m);p(m+1);p(m-1)});if(!("ontouchstart" in window)){b.append(f).append(c);f.click(function(r){r.preventDefault();g()});c.click(function(r){r.preventDefault();j()})}$(window).bind("keydown",function(r){if(r.keyCode==37){g()}else{if(r.keyCode==39){j()}}});function k(r){if(a){return false}b.show().addClass("visible");l(r);a=true;var s=b.height();e=$(window).scrollTop();$("body,html").css({height:s,overflow:"hidden"})}function h(){if(!a){return false}b.hide().removeClass("visible");a=false;$("body,html").css({height:"auto",overflow:"auto"});$(window).scrollTop(e)}function l(r){d.css("left",(-r*100)+"%")}function p(r){setTimeout(function(){q(r)},1000)}function q(r){if(r<0||r>=n.length){return false}i(n.eq(r).attr("href"),function(){o.eq(r).html(this)})}function i(s,t){var r=$("<img>").on("load",function(){t.call(r)});r.attr("src",s)}function j(){if(m+1<n.length){m++;l(m);p(m+1)}else{d.addClass("rightSpring");setTimeout(function(){d.removeClass("rightSpring")},500)}}function g(){if(m>0){m--;l(m);p(m-1)}else{d.addClass("leftSpring");setTimeout(function(){d.removeClass("leftSpring")},500)}}}})(jQuery);